<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Nanum+Gothic:wght@400;700;800&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Gothic+A1:wght@300;400;500;600;700;800;900&display=swap"
    rel="stylesheet">
  <link href="/bootstrap-5.3.0-alpha1-dist/bootstrap-5.3.0-alpha1-dist/css/" rel="stylesheet">
  <script src="https://code.jquery.com/jquery-3.6.1.min.js"></script>
  <script src="https://code.jquery.com/ui/1.13.2/jquery-ui.min.js"></script>

  <link href="/css/layout-content/post/story-detail.css" rel="stylesheet">
  <script src="/js/layout-content/post/story-detail.js"></script>

  <title>Plice | 커뮤니티</title>
</head>

<body>
  <header>
    <div class="logo-wrapper" onclick="location.href='/home'">
      <img src="/img/logo/plice.png">
      <div class="text">PLICE</div>
    </div>
    <span class="map" onclick="location.href='/map'">지도</span>
    <span class="chat" onclick="location.href='/chat'">채팅</span>
    <span class="post" onclick="location.href='/post'">이야기</span>
    <span class="contents" onclick="location.href='/contents'">컨텐츠</span>
    <span class="my-page" onclick="location.href='/my-page'">마이페이지</span>
    <div class="login-wrapper">
      <div class="login-btn" onclick="location.href='/login'">로그인</div>
    </div>
  </header>
  <div class="top-space"></div>
  <div class="background"></div>

  <!-- 수정 폼   시작-->
  <div class="modify-form-wrapper">
    <form action="" method="post" class="modify-form">
      <div class="head">
        <span class="text">이야기 수정</span>
        <img class="close" src="/img/icon/close.png">
      </div>
      <div class="body">
        <div class="title-wrapper">
          <div class="label">ㅣ 제목</div>
          <textarea name="title" class="title-input" maxlength="30" placeholder="제목을 입력하세요."></textarea>
        </div>
        <div class="content-wrapper">
          <div class="label">ㅣ내용</div>
          <div class="content-frame">
            <textarea name="content" class="content-input" maxlength="3000" placeholder="내용을 입력하세요."></textarea>
            <div class="count">0/3000</div>
          </div>
        </div>
      </div>
      <div class="regist-button" onclick="formSubmit(this)">등록</div>
    </form>
  </div>
  <!-- 수정 폼   끝-->


 <div class="modal-background"></div>
  <div class="alert-window close-alert">
    <div class="text">
      글 수정을 취소하겠습니까?
    </div>
    <button class="cancel" onclick="hideAlert(this)">취소</button>
    <button class="okay" onclick="formClose(this)">확인</button>
  </div>

  <div class="alert-window delete-alert">
    <div class="text">
      글을 삭제하시겠습니까?
    </div>
    <button class="cancel" onclick="hideAlert(this)">취소</button>
    <button class="okay" onclick="postDelete(this)">확인</button>
  </div>

  <div class="alert-window reply-delete-alert">
    <div class="text">
      댓글을 삭제하시겠습니까?
    </div>
    <button class="cancel" onclick="hideAlert(this)">취소</button>
    <button class="okay" onclick="replyDelete(this)">확인</button>
  </div>


  <div class="meta-wrapper">

    <div class="meta-title">
      <div class="story-title">이야기</div>
    </div>

    <div class="tag-wrapper story-tag-wrapper active-tag-wrapper">
      <div class="tag story-tag"></div>
      <div class="text">이야기</div>
    </div>

    <div class="tag-wrapper notice-tag-wrapper" onclick="location.href='/post'">
      <div class="tag notice-tag"></div>
      <div class="text">공지사항</div>
    </div>

    <div class="frame">

      <div class="story-frame">
        <div class="head">
          <div class="back">
            <img class="icon" src="/img/icon/chevron-left.svg">
            <div class="text" onclick="location.href='/post'">목록으로</div>
          </div>
          <div class="btn-wrapper">
            <div class="modify-btn btn">
              <img src="/img/icon/pencil-square.svg">
              <div class="text">수정</div>
            </div>
            <div class="delete-btn btn">
              <img src="/img/icon/x-square.svg">
              <div class="text">삭제</div>
            </div>
          </div>
        </div>

        <div class="body">
          <div class="title-wrapper">
            <div class="title">이야기 글 샘플 제목</div>
            <div class="below">
              <div class="writer">유저11</div>
              <div class="split">ㅣ</div>
              <div class="reg-date">2022.12.31 20:13:39</div>
              <div class="hits">조회 14</div>
              <div class="split">ㅣ</div>
              <div class="reply">댓글 3</div>
            </div>
          </div>
          <div class="content">
            지난 10일 사우디 수도 리야드 국제공항에 도착한 비행기는 활주로에서 착륙하지 못하고 몇바퀴 선회를 했다.<br>
            창 밖을 보니 활주로에 빗방울이 엄청나게 쏟아지고 있었다. 사우디에서 소낙비를 맞게 될 줄이야!<br>
            이날 새벽부터 낮까지 내린 비로 리야드 시내는 물바다가 돼 버렸다.<br>
            불과 10~20mm에 불과한 비에도 배수시설이 부족한 사우디에서는 곳곳에서 맨홀이 역류하고 도로가 끊겼다.
          </div>

          <div class="comment-wrapper">
            <div class="sum" th:text="'댓글 '+${inquire.replies.size()}+'개'">댓글 3개</div>
            <div class="comment-input">
              <input id="commentSeq" th:value="${inquire.replies.size()}" type="hidden">
              <input id="commentLevel" value="0" type="hidden">
              <textarea class="comment" name="comment" maxlength="300" onkeydown="resize(this)" onkeyup="resize(this)"
                onclick="commentClick(this)" onfocusout="commentFocusout(this)"
                placeholder="내용을 입력해주세요. 최대 300자까지 입력할 수 있습니다."></textarea>
              <div class="comment-underline">
                <div class="comment-underline-back"></div>
              </div>
              <div class="comment-button-save" value="save" onclick="replySave(this)">등록</div>
              <div class="comment-button-cancel" onclick="commentCancel(this)">취소</div>
            </div>

            <div th:each="reply : ${inquire.replies}" th:if="${reply.parent==null}">

              <div th:fragment="replyBlock" th:remove="tag">

                <div class="my-comment" th:style="${'padding-left:'+40*reply.level+'px;'}">
                  <input id="replyId" th:value="${reply.id}" type="hidden">
                  <div class="main">
                    <div class="header">
                      <span class="name" th:text="${reply.member?.nickname}">유저11</span>
                      <span class="split" th:if="${reply.member!=null}">ㅣ</span>
                      <span class="date"
                        th:text="${#temporals.format(inquire.regDate, 'yyyy.MM.dd HH:mm:ss')}">2022.12.31
                        14:53:10</span>
                    </div>
                    <div class="body" th:utext="${reply.content}">
                      이란에서 히잡 반대시위로 사회가 혼란스럽고 수많은 여성들이 체포되고 있는데,<br>
                      이슬람 최대 성지인 메카를 수호하는 보수적인 국가인 사우디인데도 분위기는 사뭇 달랐다.
                    </div>
                    <div class="option">
                      <img class="opt-btn" src="/img/icon/three-dots-vertical.svg">
                      <div class="box">
                        <div class="edit"
                          th:if="${#authorization.expression('hasRole(''ADMIN'')')} ? true : (${#authentication.principal.username} == ${reply.member?.phone})">
                          수정</div>
                        <div class="remove"
                          th:if="${#authorization.expression('hasRole(''ADMIN'')')} ? true : (${#authentication.principal.username} == ${reply.member?.phone})">
                          삭제</div>
                        <div class="reply">답글 달기</div>
                      </div>
                    </div>
                  </div>
                </div>

                <th:block th:each="children : ${reply.children}">
                  <th:block th:with="reply = ${children}" th:include="this :: replyBlock" th:remove="tag">
                  </th:block>
                </th:block>

              </div>

            </div>

          </div>

          <div class="other-story">
            <div class="next-detail">
              <span class="next">다음글</span>
              <input class="inquireId" th:value="${nextInquire.id}" type="hidden">
              <img class="icon" src="/img/icon/chevron-up.svg">
              <a class="title" th:if="${nextInquire.id==null}">다음글이 없습니다.</a>
              <a class="title" th:if="${nextInquire.id!=null}" onclick="inquireDetail(this)"
                th:text="${nextInquire.title}"></a>
            </div>

            <div class="prev-detail">
              <span class="prev">이전글</span>
              <input class="inquireId" th:value="${prevInquire.id}" type="hidden">
              <img class="icon" src="/img/icon/chevron-up.svg">
              <a class="title" th:if="${prevInquire.id==null}">이전글이 없습니다.</a>
              <a class="title" th:if="${prevInquire.id!=null}" onclick="inquireDetail(this)"
                th:text="${prevInquire.title}"></a>
            </div>
          </div>

          <div class="back-btn" onclick="location.href='/post'">목록으로</div>
        </div>
      </div>


    </div>

  </div>

  <footer>
    <p>
      (주)플라이스<br>
      사업자 번호: 000-00-00000&nbsp&nbsp&nbsp&nbsp통신판매업신고번호 : 제2023-서울 영등포-00000호<br>
      주소 : 서울특별시 영등포구 선유동2로 57 이레빌딩<br><br>

      고객센터 : 02-0000-0000 | 평일 10:00 ~ 18:30, 점심시간 : 12:00 ~ 13:00 (토·일요일, 공휴일 휴무)<br>
      팩스 : 02-000-0000&nbsp&nbsp&nbsp&nbsp프로모션/사업 제휴문의 : cerdure@gmail.com<br>
      PLICE, Inc. All rights reserved.
    </p>
    <div class="icons">
      <img src="/img/icon/instagram_mono.png">
      <img src="/img/icon/facebook_mono.png">
      <img src="/img/icon/blog_mono.png">
      <img src="/img/icon/naverpost_mono.png">
      <img src="/img/icon/youtube_mono.png">
    </div>
  </footer>
</body>

</html>